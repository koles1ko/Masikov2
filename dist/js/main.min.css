const burger=document.querySelector(".menu__burger"),menu=document.querySelector(".menu__navigation");burger.addEventListener("click",()=>{menu.classList.toggle("menu-open"),burger.classList.toggle("menu-open")});let title=document.title,settingsLink=document.querySelector(".page-header__settings");function changeLinkLogo(e){"Home"==e&&settingsLink.setAttribute("href","settings.html"),"Settings"==e&&settingsLink.setAttribute("href","index.html")}changeLinkLogo(title);for(var input=document.querySelectorAll(".js-number-result"),buffer=[],i=0;input.length>i;i++)buffer[i]=document.createElement("div"),buffer[i].className="js-number-buffer",buffer[i].classList.add("content-result__numbers"),input[i].parentNode.insertBefore(buffer[i],input[i].nextSibling),input[i].oninput=function(){resultAction.style.color="black",resultAction.style.borderColor="black",this.nextElementSibling.innerHTML=this.value,this.style.width=this.nextElementSibling.clientWidth+8+"px"};const hint=document.querySelector(".js-hint"),hintClose=document.querySelector(".js-close"),hintPopup=document.querySelector(".popup-wrapper"),buttonStart=document.querySelector(".js-start"),blockStart=document.querySelector(".page-content__start"),blockResult=document.querySelector(".page-content__result"),blockPlay=document.querySelector(".page-content__play"),blockText=document.querySelector(".content-result__text");let num1,num2,num,boom,currentLength,resultMachine,resultUser,content,timerValue,resultMachineDigits,resultUserDigits,number1=document.querySelector(".js-number-first"),number2=document.querySelector(".js-number-second"),numbers=document.querySelectorAll(".content-result__numbers"),resultAction=document.querySelector(".js-number-result"),countTrue=document.querySelector(".content-bool__true_count"),countFalse=document.querySelector(".content-bool__false_count"),settingButton=document.querySelector(".page-header__settings"),noChoose=document.querySelector(".page-content__choose");function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function openHintBox(){hintPopup.style.opacity=1,hintPopup.style.visibility="visible",hintClose.closest(".popup-wrapper").addEventListener("click",()=>{hintPopup.style.opacity=0,hintPopup.style.visibility="hidden"})}function startGame(){blockStart.style.display="none",blockResult.style.display="block",blockResult.classList.add("active")}function endGame(){blockStart.style.display="block",blockResult.style.display="none",blockResult.classList.remove("active")}function countDigits(e){let t=0;for(;e>=1;)e/=10,t++;return t}function play(){if(boom=JSON.parse(localStorage.getItem("typeOfNumber")),console.log(boom),blockResult.classList.contains("active"))endGame();else if(null!=boom){function e(){let e;function t(){do{num=Math.floor(Math.random()*Math.pow(10,currentLength))}while(0==num)}resultAction.value="",function(t){let n,o=JSON.parse(localStorage.getItem("typeOfNumber")).filter(e=>0!=e);console.log(o),e=o[Math.floor(Math.random()*o.length)],console.log(e),e=e.slice(0,1),console.log(e),n=Number(e),currentLength=n}(),function n(){t(),number1.textContent=num,num.toString().length==e?(console.log("первое число"),num1=parseInt(number1.textContent,10)):n()}(),function n(){t(),number2.textContent=num,num.toString().length==e?(console.log("второе число"),num2=parseInt(number2.textContent,10)):n()}(),operationOfMath(num1,num2),resultMachineDigits=countDigits(resultMachine),resultAction.setAttribute("maxlength",resultMachineDigits),console.log("длина числа робота = "+resultMachineDigits),console.log(resultMachine),resultAction.style.color="black",resultAction.focus(),numbers.forEach(e=>{e.style.opacity=1})}startGame(),e(),resultAction.addEventListener("input",()=>{resultUserDigits=countDigits(resultAction.value),console.log("длина числа пользователя = "+resultUserDigits),console.log(resultAction.value),resultUser=+resultAction.value,resultUserDigits==resultMachineDigits&&(console.log("победа"),resultUser==resultMachine?(resultAction.style.color="green",countTrue.value++,setTimeout(e,1e3),numbers.forEach(e=>{e.style.opacity=0})):(resultAction.style.color="red",resultAction.style.borderColor="red",countFalse.value++,setTimeout(e,1e3),numbers.forEach(e=>{e.style.opacity=0})))})}else{noChoose.style.visibility="visible",noChoose.style.opacity="1",setTimeout((function(){noChoose.style.opacity=0,noChoose.style.visibility="hidden"}),2e3)}timerValue=JSON.parse(localStorage.getItem("numberOfTimerCount"))}function operationOfMath(e,t){JSON.parse(localStorage.getItem("modeCheck"))&&(resultMachine=e+t)}countTrue.value=0,countFalse.value=0,testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),blockStart.addEventListener("click",play),hint.addEventListener("click",()=>{openHintBox()});